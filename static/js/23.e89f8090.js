(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{"5ee8":function(e,a,n){},"9ca3":function(e,a,n){"use strict";n.r(a);var o=function(){var e=this,a=e.$createElement,n=e._self._c||a;return n("div",{staticClass:"page"},[n("div",{staticClass:"content"},[n("van-cell-group",[n("van-field",{attrs:{"input-align":"right",clearable:"",label:"申请人",placeholder:"请输入您的姓名"},model:{value:e.form.username,callback:function(a){e.$set(e.form,"username",a)},expression:"form.username"}}),n("van-field",{attrs:{"input-align":"right",clearable:"",readonly:"",label:"联系电话",placeholder:"请输入您的联系电话"},model:{value:e.form.phone,callback:function(a){e.$set(e.form,"phone",a)},expression:"form.phone"}}),e.form.enterprise_name&&0!=e.form.enterprise_name.length?1==e.form.enterprise_name.length?[n("van-field",{attrs:{"input-align":"right",disabled:"",clearable:"",label:"企业名称",placeholder:"请输入您的企业名称"},model:{value:e.form.company,callback:function(a){e.$set(e.form,"company",a)},expression:"form.company"}})]:[n("van-field",{attrs:{"input-align":"right",clearable:"",label:"企业名称",readonly:"","is-link":"",placeholder:"请选择您的企业名称"},on:{click:function(a){e.showCompany=!0}},model:{value:e.form.company,callback:function(a){e.$set(e.form,"company",a)},expression:"form.company"}})]:[n("van-field",{attrs:{"input-align":"right",clearable:"",label:"企业名称",placeholder:"请输入您的企业名称"},model:{value:e.form.company,callback:function(a){e.$set(e.form,"company",a)},expression:"form.company"}})],n("van-field",{attrs:{"input-align":"right",clearable:"",label:"邮箱地址",placeholder:"请输入您的邮箱"},model:{value:e.form.email,callback:function(a){e.$set(e.form,"email",a)},expression:"form.email"}})],2),n("div",{staticClass:"gray pl15 p5 f14 mt5"},[e._v("需求描述")]),n("van-cell-group",[n("van-field",{attrs:{type:"textarea",placeholder:"请输入您的需求描述",rows:"1",autosize:""},model:{value:e.form.need,callback:function(a){e.$set(e.form,"need",a)},expression:"form.need"}})],1)],1),n("div",{staticClass:"p15"},[n("div",{staticClass:"btn btn-success f17 btn-round",on:{click:e.submitApply}},[e._v("提交申请")])]),n("van-popup",{attrs:{position:"bottom"},model:{value:e.showCompany,callback:function(a){e.showCompany=a},expression:"showCompany"}},[n("van-picker",{attrs:{columns:e.form.enterprise_name,"show-toolbar":""},on:{confirm:e.choseCompany,cancel:e.onCancel}})],1)],1)},t=[],s=n("90b9"),i={name:"apply",data:function(){return{serviceType:1,showCompany:!1,tag:null,disableApply:!1,form:{phone:"",username:"",company:"",email:"",need:""}}},created:function(){this.setServiceType(),this.form=JSON.parse(JSON.stringify(this.$store.state.userInfo)),this.form.enterprise_name.length>0&&(this.form.company=this.form.enterprise_name[0])},methods:{setServiceType:function(){if(s["e"](this.$route.params))this.$router.push({name:"Index"});else{var e=s["b"](window.location.href,"tag"),a=this.$route.params.serviceType;this.serviceType=a,this.tag=e}},onCancel:function(){this.showCompany=!1},choseCompany:function(e){this.form.company=e,this.showCompany=!1},submitApply:function(){var e=this;if(!this.disableApply){var a=this.form,n=a.phone,o=a.username,t=a.company,s=a.email,i=void 0===s?"":s,l=a.need,r=void 0===l?"":l;if(o)if(t){var p=/^[A-Za-z\d]+([-_.][A-Za-z\d]+)*@([A-Za-z\d]+[-.])+[A-Za-z\d]{2,4}$/;if(!i||p.test(i)){var c,m=this.form.zid,f={phone:n,username:o,company:t,email:i||"",need:r||"",zone_id:m,serviceType:this.serviceType};1==this.tag?c=this.apiConfig.applyCompanyService:2==this.tag&&(c=this.apiConfig.applyUnionService),this.$toast.loading({mask:!0,message:"提交中..."}),this.disableApply=!0,this.axios.post(c,f).then(function(a){1===a.s?(e.$toast.success("提交成功，我们将会联系您"),setTimeout(function(){e.$router.push({name:"applyRecord",query:{serviceType:e.serviceType,zone_id:m}})},2500)):setTimeout(function(){e.disableApply=!0},1e3)})}else this.$toast("邮箱填写有误")}else this.$toast("请填写公司名称");else this.$toast("请输入您的姓名")}}}},l=i,r=(n("c202"),n("2877")),p=Object(r["a"])(l,o,t,!1,null,"526a2521",null);p.options.__file="apply.vue";a["default"]=p.exports},c202:function(e,a,n){"use strict";var o=n("5ee8"),t=n.n(o);t.a}}]);
//# sourceMappingURL=23.e89f8090.js.map